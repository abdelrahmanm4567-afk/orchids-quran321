"use client";

import { useState } from "react";
import { ChevronDown, Search, HelpCircle } from "lucide-react";

const faqData = [
  { cat: "عام", q: "ما هي اكاديمية الحافظ المتميز اون لاين؟", a: "هي منصة تعليمية عالمية متخصصة في تعليم القرآن الكريم والتجويد وتأسيس اللغة العربية عبر الإنترنت، تخدم طلاباً من أكثر من 30 دولة حول العالم." },
  { cat: "عام", q: "كيف يمكنني التسجيل في الأكاديمية؟", a: "يمكنك التسجيل عبر التواصل معنا من خلال واتساب أو البريد الإلكتروني أو صفحة الاتصال بنا، وسنقوم بإرشادك لاختيار البرنامج والباقة المناسبة." },
  { cat: "عام", q: "هل الأكاديمية متاحة لجميع الأعمار؟", a: "نعم، نوفر برامج تعليمية تناسب جميع الأعمار من الأطفال وحتى الكبار بمناهج مخصصة لكل فئة عمرية." },
  { cat: "عام", q: "ما هي البرامج التعليمية المتاحة؟", a: "نقدم برنامجين رئيسيين: برنامج القرآن الكريم والتجويد، وبرنامج تأسيس اللغة العربية قراءة وكتابة." },
  { cat: "عام", q: "هل يمكنني حضور حصة تجريبية مجانية؟", a: "نعم، نوفر حصة تجريبية مجانية لجميع البرامج حتى تتعرف على أسلوب التعليم قبل الاشتراك." },
  { cat: "عام", q: "ما هي المنصات المستخدمة في التعليم؟", a: "نستخدم منصات تعليمية تفاعلية مثل Zoom وSkype وغيرها من المنصات الحديثة التي تضمن جودة التعليم." },
  { cat: "عام", q: "هل تقدمون شهادات للطلاب؟", a: "نعم، نقدم شهادات إتمام الحفظ والتجويد والتأسيس العربي معتمدة من الأكاديمية." },
  { cat: "عام", q: "كيف يتم متابعة مستوى الطالب؟", a: "يتم إعداد تقارير دورية عن مستوى الطالب وإرسالها لولي الأمر، مع اختبارات تقييمية منتظمة." },
  { cat: "عام", q: "هل يمكنني تغيير المعلم إذا لم أكن راضياً؟", a: "بالطبع، يمكنك طلب تغيير المعلم في أي وقت إذا لم تكن راضياً عن الأداء." },
  { cat: "عام", q: "هل تتوفر معلمات للطالبات؟", a: "نعم، لدينا نخبة من المعلمات المجازات المتخصصات في تعليم الطالبات." },
  { cat: "القرآن", q: "ما هو منهج تحفيظ القرآن الكريم؟", a: "نتبع منهجاً متكاملاً يشمل الحفظ التدريجي مع المراجعة المستمرة والتجويد والتفسير المبسط." },
  { cat: "القرآن", q: "هل المعلمون مجازون في القرآن؟", a: "نعم، جميع معلمي القرآن حاصلون على إجازات بأسانيد متصلة إلى رسول الله صلى الله عليه وسلم." },
  { cat: "القرآن", q: "كم مدة الحصة الواحدة؟", a: "مدة الحصة 30 دقيقة، وهي المدة المثالية للتركيز والاستيعاب خاصة للأطفال." },
  { cat: "القرآن", q: "هل يمكنني حفظ القرآن كاملاً من خلال الأكاديمية؟", a: "نعم، لدينا طلاب أتموا حفظ القرآن الكريم كاملاً من خلال برنامجنا بتوفيق الله." },
  { cat: "القرآن", q: "هل تتضمن الحصص تعليم التجويد؟", a: "نعم، التجويد جزء أساسي من كل حصة حيث يتم تطبيق أحكام التجويد أثناء الحفظ والمراجعة." },
  { cat: "القرآن", q: "ما هي طريقة المراجعة المتبعة؟", a: "نتبع طريقة المراجعة التراكمية حيث يراجع الطالب المحفوظ القديم باستمرار مع الحفظ الجديد." },
  { cat: "القرآن", q: "هل يوجد تفسير للآيات أثناء الحفظ؟", a: "نعم، يقوم المعلم بتفسير الآيات بشكل مبسط ليساعد الطالب على فهم ما يحفظ." },
  { cat: "القرآن", q: "هل يمكنني البدء من أي سورة أريدها؟", a: "نعم، يمكنك تحديد خطة الحفظ التي تناسبك بالتنسيق مع المعلم." },
  { cat: "القرآن", q: "كيف يتم تصحيح أخطاء التلاوة؟", a: "يتم التصحيح الفوري من المعلم أثناء الحصة مع شرح القاعدة التجويدية المتعلقة." },
  { cat: "القرآن", q: "هل يتم إجراء اختبارات للطلاب؟", a: "نعم، نقوم بإجراء اختبارات تقييمية شهرية لقياس مستوى التقدم في الحفظ والتجويد." },
  { cat: "العربية", q: "ما هو منهج تأسيس اللغة العربية؟", a: "منهج شامل يبدأ من الحروف ومخارجها وصولاً للقراءة والكتابة بطلاقة باستخدام طرق حديثة ومبتكرة." },
  { cat: "العربية", q: "هل البرنامج مناسب لغير الناطقين بالعربية؟", a: "نعم، لدينا برامج خاصة لتعليم العربية لغير الناطقين بها بأساليب سهلة ومبسطة." },
  { cat: "العربية", q: "ما هي الفئة العمرية المناسبة للتأسيس؟", a: "برنامج التأسيس مناسب من سن 4 سنوات وحتى الكبار، مع مناهج مخصصة لكل فئة عمرية." },
  { cat: "العربية", q: "هل يتضمن البرنامج تعليم الكتابة؟", a: "نعم، يتضمن البرنامج تعليم الكتابة بطرق حديثة وتمارين تفاعلية متنوعة." },
  { cat: "العربية", q: "كم المدة اللازمة لإتقان القراءة والكتابة؟", a: "تختلف المدة حسب مستوى الطالب وانتظامه، لكن بشكل عام يحتاج الطالب من 3 إلى 6 أشهر." },
  { cat: "العربية", q: "هل يتم استخدام وسائل تعليمية تفاعلية؟", a: "نعم، نستخدم أحدث الوسائل التعليمية التفاعلية والألعاب اللغوية لجعل التعلم ممتعاً." },
  { cat: "العربية", q: "هل يتضمن البرنامج قواعد اللغة العربية؟", a: "نعم، يتم تعليم القواعد الأساسية بشكل مبسط ومتكامل مع تعليم القراءة والكتابة." },
  { cat: "العربية", q: "هل يمكن الجمع بين برنامج القرآن والعربي؟", a: "نعم، يمكنك الاشتراك في كلا البرنامجين معاً مع تنسيق المواعيد بما يناسبك." },
  { cat: "العربية", q: "ما الفرق بين برنامج التأسيس والبرنامج المتقدم؟", a: "برنامج التأسيس للمبتدئين الذين لا يعرفون القراءة والكتابة، بينما البرنامج المتقدم لتطوير المهارات." },
  { cat: "العربية", q: "هل يتم تقديم تقارير عن مستوى الطالب في العربي؟", a: "نعم، يتم إعداد تقارير دورية عن مستوى الطالب في القراءة والكتابة وإرسالها لولي الأمر." },
  { cat: "المواعيد", q: "هل المواعيد مرنة؟", a: "نعم، نوفر مرونة كاملة في اختيار المواعيد المناسبة لك مع إمكانية التعديل." },
  { cat: "المواعيد", q: "ما هي أوقات العمل المتاحة؟", a: "نعمل على مدار الأسبوع من السبت إلى الجمعة، من الساعة 8 صباحاً حتى 11 مساءً بتوقيت القاهرة." },
  { cat: "المواعيد", q: "هل يمكنني إلغاء حصة وتعويضها؟", a: "نعم، يمكنك إلغاء الحصة قبل 6 ساعات على الأقل وسيتم تعويضها في موعد آخر." },
  { cat: "المواعيد", q: "هل يمكن تغيير موعد الحصة؟", a: "نعم، يمكنك تغيير موعد الحصة بالتنسيق المسبق مع الإدارة قبل 24 ساعة على الأقل." },
  { cat: "المواعيد", q: "ماذا يحدث إذا تغيب المعلم عن الحصة؟", a: "في حالة غياب المعلم يتم توفير معلم بديل أو تعويض الحصة في موعد آخر." },
  { cat: "الباقات", q: "ما هي الباقات المتاحة لبرنامج القرآن؟", a: "لدينا 3 باقات: 4 حصص بـ$15، 8 حصص بـ$27، و12 حصة بـ$38." },
  { cat: "الباقات", q: "ما هي الباقات المتاحة لبرنامج العربي؟", a: "لدينا 3 باقات: 4 حصص بـ$24، 8 حصص بـ$38، و12 حصة بـ$50." },
  { cat: "الباقات", q: "هل يوجد خصم للاشتراك في أكثر من باقة؟", a: "نعم، نوفر خصومات خاصة عند الاشتراك في أكثر من باقة أو تسجيل أكثر من طالب." },
  { cat: "الباقات", q: "ما هي مدة صلاحية الباقة؟", a: "صلاحية الباقة شهر واحد من تاريخ الاشتراك." },
  { cat: "الباقات", q: "هل يمكنني ترقية الباقة أثناء الشهر؟", a: "نعم، يمكنك ترقية باقتك في أي وقت ودفع الفرق فقط." },
  { cat: "الدفع", q: "ما هي طرق الدفع المتاحة؟", a: "نقبل الدفع عبر التحويل البنكي، PayPal، فودافون كاش، وغيرها من وسائل الدفع الإلكتروني." },
  { cat: "الدفع", q: "هل الدفع شهري أم سنوي؟", a: "الدفع شهري، ويمكنك التجديد أو إلغاء الاشتراك في أي وقت." },
  { cat: "الدفع", q: "هل يوجد سياسة استرداد الأموال؟", a: "نعم، يمكنك استرداد المبلغ خلال أول 48 ساعة من الاشتراك إذا لم تكن راضياً عن الخدمة." },
  { cat: "الدفع", q: "هل الأسعار شاملة جميع التكاليف؟", a: "نعم، الأسعار المعلنة شاملة ولا توجد أي رسوم إضافية خفية." },
  { cat: "الدفع", q: "هل يمكنني الدفع بالعملة المحلية؟", a: "الأسعار بالدولار الأمريكي ويمكن الدفع بما يعادلها بالعملة المحلية حسب سعر الصرف." },
  { cat: "تقني", q: "ما هي المتطلبات التقنية للحصص؟", a: "تحتاج إلى جهاز كمبيوتر أو هاتف ذكي مع اتصال إنترنت مستقر وسماعة ومايكروفون." },
  { cat: "تقني", q: "هل يمكنني الحضور من الهاتف المحمول؟", a: "نعم، يمكنك حضور الحصص من أي جهاز سواء كمبيوتر أو تابلت أو هاتف محمول." },
  { cat: "تقني", q: "ماذا أفعل إذا واجهت مشكلة تقنية أثناء الحصة؟", a: "تواصل مع فريق الدعم الفني عبر واتساب وسيتم مساعدتك فوراً، وسيتم تعويض الحصة إذا لزم الأمر." },
  { cat: "تقني", q: "هل يتم تسجيل الحصص؟", a: "يمكن تسجيل الحصص بناءً على طلب الطالب أو ولي الأمر للمراجعة لاحقاً." },
  { cat: "تقني", q: "كيف يمكنني التواصل مع الدعم الفني؟", a: "يمكنك التواصل معنا عبر واتساب على الرقم 201130127894+ أو عبر البريد الإلكتروني enamel311@gmail.com." },
];

const categories = ["الكل", "عام", "القرآن", "العربية", "المواعيد", "الباقات", "الدفع", "تقني"];

export default function FAQClient() {
  const [activeCategory, setActiveCategory] = useState("الكل");
  const [openIndex, setOpenIndex] = useState<number | null>(null);
  const [searchQuery, setSearchQuery] = useState("");

  const filtered = faqData.filter((item) => {
    const matchesCat = activeCategory === "الكل" || item.cat === activeCategory;
    const matchesSearch = !searchQuery || item.q.includes(searchQuery) || item.a.includes(searchQuery);
    return matchesCat && matchesSearch;
  });

  return (
    <div className="page-transition">
      {/* Hero */}
      <section className="relative bg-gradient-to-bl from-emerald-900 via-emerald-800 to-emerald-950 text-white py-20 md:py-28">
        <div className="absolute inset-0 islamic-pattern opacity-20" />
        <div className="relative max-w-4xl mx-auto px-4 sm:px-6 text-center">
          <h1 className="text-4xl md:text-5xl font-bold mb-6">الأسئلة الشائعة</h1>
          <p className="text-lg md:text-xl text-emerald-200 leading-relaxed max-w-3xl mx-auto mb-8">
            إجابات على أكثر الأسئلة شيوعاً حول برامجنا وخدماتنا
          </p>
          <div className="relative max-w-lg mx-auto">
            <Search className="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
            <input
              type="text"
              placeholder="ابحث في الأسئلة الشائعة..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pr-12 pl-4 py-3 rounded-xl bg-white text-gray-900 placeholder:text-gray-400 text-right"
            />
          </div>
        </div>
      </section>

      <section className="py-16 bg-white">
        <div className="max-w-4xl mx-auto px-4 sm:px-6">
          {/* Category filters */}
          <div className="flex flex-wrap gap-2 mb-8 justify-center">
            {categories.map((cat) => (
              <button
                key={cat}
                onClick={() => { setActiveCategory(cat); setOpenIndex(null); }}
                className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${
                  activeCategory === cat ? "bg-emerald-700 text-white" : "bg-gray-100 text-gray-600 hover:bg-gray-200"
                }`}
              >
                {cat}
              </button>
            ))}
          </div>

          <p className="text-sm text-gray-500 mb-6 text-center">{filtered.length} سؤال</p>

          {/* FAQ items */}
          <div className="space-y-3">
            {filtered.map((item, i) => (
              <div key={i} className="border border-gray-200 rounded-xl overflow-hidden">
                <button
                  onClick={() => setOpenIndex(openIndex === i ? null : i)}
                  className="w-full flex items-center justify-between p-5 text-right hover:bg-gray-50 transition-colors"
                >
                  <div className="flex items-center gap-3 flex-1">
                    <HelpCircle className="w-5 h-5 text-emerald-600 shrink-0" />
                    <span className="font-medium text-gray-900">{item.q}</span>
                  </div>
                  <ChevronDown className={`w-5 h-5 text-gray-400 shrink-0 transition-transform ${openIndex === i ? "rotate-180" : ""}`} />
                </button>
                {openIndex === i && (
                  <div className="px-5 pb-5 pr-13">
                    <p className="text-gray-600 leading-relaxed border-t border-gray-100 pt-4 mr-8">{item.a}</p>
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );
}
